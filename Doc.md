# Документация

# Классы

![](https://github.com/Di-Gro/TileVikings/blob/3294db30826c0a335f963050257a5a658c11aa62/Docs/bps.png)

## BE_Type
Описывают типы игровых объектов. Используются в модели (Mvc) для различения объектов без знания их классоа

#### MapObjectType 
Типы иных объектов на клетках {Домик, Верфь}

### PlayerType
Типы игроков {Игрок, Противник} 

### TileType
Типы клеток (рельефа) {Холм, Равнина, Лес}

### UnitType
Типы юнитов {Легкая пехота, Тяжелая пехота, Копейщики, Лучники}

## BFL_
Библиотеки функций

## BML_
Библиотеки макросов

## BP_M_
Классы модели (Mvc), используются моделью и не могут быть инстанцированы на сцене. Наслудуются от Objtct.<br>
Инстанцируются TileMap, описывают состояние карты в runtime-е и используются для работы с ней. 

### M_MapObject
Пока не реализован.

### M_Province
- ***index*** - индекс провинции в TileMapData
- ***onwer*** - тип игрока, которуму принадлежит провинция
- ***tiles*** - список тайлов, принадлежащих этой провинции

* ***Has Unit (PlayerType owner)*** - Возвращает true, если в провинции есть юниты owner-а
* ***Get Units (PlayerType owner)*** - Возвращает все юниты owner-а в провинции
* ***Get All Units ()*** - Возвращает все юниты в провинции

### M_Tile
- ***index*** - индекс клетки в TileMapData. {x,y} - 2D координаты, {z} - 1D координаты
- ***type*** - тип местности в этой клетке
- ***active*** - true, если клетка помечена как активная
- ***unit*** - ссылка на юнит в этой клетке
- ***map object*** - ссылка на объект в этой клетке
- ***province*** - ссылка на провинцию, к которой принадлежит

* ***Has Unit ()*** - true, если в клетке есть юнит
* ***Has Object ()*** - true, если в клетке есть объект
* ***Has Province ()*** - true, если клетка принадлежит какой-либо провинции
* ***Is Active ()*** - всегда true, если в TileMap не активирован режим активных клеток. Если активирован, то возвращает self.active
* ***Get Next (direction)*** - возвращает соседнюю клетку в указанном направлении и ее валидность

Следующие методы уходят в TileMap и проводят к вызову событий, которые слушает TileMapView.
- ***Hilight (color)*** - сообщает, что нужно включить подсветку клетки указанным цветом
- ***Un Hilight ()*** - сообщает, что нужно выключить подсветку
 
## BP_
Классы, которые можно инстанцировать на сцене. Наследуются от Actor. 

### CameraController
Контроллер стратегической камеры. Нужно разместить на сцене, будет сам слушать ввод игрока. <br>
Использует InputActions: MoveCamera, RotateCamera, XAxis, YAxis

### GameState
GameState. Реализует BPI_GameState. Предоставляяет "синглтоны". <br>
Принцип работы "синглтона" - при первом обращении, GameState ищет объект на сцене, запоминает его и возвращает.<br>
Текущие синглтоны: TileMap, TileMapView. 

### InteractionManager
Управляет взаимодействием игрока с игровыми объектами. 
Слушает InteractionHelper для определения смены объекта взаимодействия (IInteractable). 
Управляет жизнью объекта управляющего взаимодействием (Interactor). 



### UnitInteractor (пока нет)
Управляет взаимодействием игрока с юнитом. Это все действия юнита - перемещение, атака, пропуск хода, сон, удаление.

 
